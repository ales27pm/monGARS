# Django Webapp Guardrails

> ‚ö†Ô∏è Auto-generated by `scripts/manage_agents.py`. Update `configs/agents/agents_config.json` and rerun the script instead of editing this file manually.

## Scope

Applies to the Django project in `webapp/`, covering async views, services, templates, and
middleware.

## Automation

- Refresh via the agents manager script to sync with roadmap and API contracts.

## Roadmap Alignment

- **Web Interface Goals**
  - ‚úÖ FastAPI chat/history/token endpoints with validation.
  - ‚úÖ Django chat UI with progressive enhancement.
  - ‚úÖ FastAPI WebSocket handler with ticket verification, history replay, and streaming guarded by `WS_ENABLE_EVENTS`.
  - üîÑ Replaced hard-coded credential stores with database-backed auth flows (the `DEFAULT_USERS` bootstrap in `monGARS/api/web_api.py` still provisions demo accounts until the cleanup lands).
  - üöß Publish polished SDKs and reference clients.

## Views & Services

- Keep views asynchronous and delegate outbound HTTP calls to `chat/services.py` for centralised auth,
    retries, and logging.
- Pull configuration from environment variables/Django settings; never hardcode secrets or URLs.
- Apply `require_token` to authenticated routes and document context variables in docstrings.

## Templates & Frontend

- Keep business logic in views/services; templates focus on presentation with progressive enhancement.
- Ensure JavaScript has graceful degradation paths and document new data attributes/events.

## Testing

Update `tests/test_api_history.py` and `tests/test_websocket.py` when UI flows change; mock FastAPI
interactions with `respx`/`httpx`.
