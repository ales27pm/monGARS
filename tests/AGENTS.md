# Test Suite Expectations

> ⚠️ Auto-generated by `scripts/manage_agents.py`. Update `configs/agents/agents_config.json` and rerun the script instead of editing this file manually.

## Scope

Applies to everything in `tests/`, including async fixtures, integration checks, and long-running
suites.

## Automation

- Auto-generated; run the refresh command after adding new suites or fixtures.

## Roadmap Alignment

- **Stability Assurance**
  - 🔐 Align JWT algorithm with deployed secrets (HS256 today). Implement asymmetric keys only when the infrastructure supports managed key storage.
  - 🔒 Store runtime secrets in Vault/Sealed Secrets instead of raw `k8s/secrets.yaml`.
  - 🛡️ Update Dockerfiles to run as non-root and add a `.dockerignore` to exclude secrets and build artefacts.
  - 👤 Replace demo users in `web_api.py` with the database-backed authentication flow and migrations.
- **Research Coverage**
  - ✅ Personality profiles persisted via SQLModel with live adapter updates.
  - 🔄 Execute real self-training cycles instead of simulated versioning.
  - 🚧 Explore reinforcement learning loops and advanced scaling strategies.
  - 🔄 Expand tests for WebSockets, hardware utilities, and distributed workflows.

## Structure & Conventions

- Annotate async tests with `pytest.mark.asyncio` and lean on fixtures in `conftest.py`; never create
    event loops manually.
- Reset shared state (hippocampus caches, global singletons) in fixtures to keep tests hermetic.
- Stub heavy dependencies (Torch, spaCy, HTTP clients) with fakes or patches.

## Coverage Expectations

- Exercise success and failure paths for HTTP endpoints, WebSockets, and orchestration flows.
- Run `chaos_test.py`, `integration_test.py`, and `self_training_test.py` before releases or
    infrastructure-heavy changes.
- Constrain property-based tests to stay fast and deterministic.

## Tooling

Default command is `pytest -q`; use `pytest -k <pattern>` for focused runs and `pytest --maxfail=1`
for triage. Generate coverage with `pytest --cov=monGARS --cov=modules` when requested.
