# monGARS Delivery Charter

> ⚠️ Auto-generated by `scripts/manage_agents.py`. Update `configs/agents/agents_config.json` and rerun the script instead of editing this file manually.

## Scope

Applies to every repository change. Nested AGENTS.md files add stricter rules; this root charter
highlights the non-negotiable guardrails and shared context.

## Automation

- Generated via `python scripts/manage_agents.py refresh`. Edit the JSON profile instead of the
    Markdown when updating scope or requirements.
- Run `python scripts/manage_agents.py create <directory>` to scaffold a scoped AGENTS.md when a new
    subsystem lands.

## Roadmap Alignment

- **Security & Stability Hotlist**
  - 🔐 Align JWT algorithm with deployed secrets (HS256 today). Implement asymmetric keys only when the infrastructure supports managed key storage.
  - 🔒 Store runtime secrets in Vault/Sealed Secrets instead of raw `k8s/secrets.yaml`.
  - 🛡️ Update Dockerfiles to run as non-root and add a `.dockerignore` to exclude secrets and build artefacts.
  - 👤 Replace demo users in `web_api.py` with the database-backed authentication flow and migrations.
- **Phase 3 – Hardware & Performance**
  - ✅ Worker auto-tuning for Pi/Jetson (`recommended_worker_count`).
  - ✅ Multi-architecture build scripts and cache metrics.
  - ✅ Hardened RBAC manifests.
  - 🔄 Implement real masked next-token training in `MNTPTrainer` and wire Ray Serve HTTP requests in `LLMIntegration`.
  - 🔄 Pin container image versions in `docker-compose.yml` and extend Alembic migrations.
- **Phase 5 – Web/API Refinement**
  - ✅ FastAPI chat/history/token endpoints with validation.
  - ✅ Django chat UI with progressive enhancement.
  - 🔄 Implement FastAPI WebSocket handler to match frontend expectations.
  - 🔄 Replace hard-coded credential stores with database-backed auth flows.
  - 🚧 Publish polished SDKs and reference clients.

## Workflow Guardrails

- Target **Python 3.11** across tooling and CI.
- Format with `black` and `isort` using the repository `pyproject.toml` configuration.
- Run `pytest -q` before raising a pull request; record skipped suites and why.
- Document architecture, configuration, and operator workflows in `docs/` or the README when behaviour
    changes.

## Observability & Security

- Load configuration through `monGARS.config.get_settings()` so cached settings stay coherent across
    services.
- Redact secrets in logs and surface metrics via OpenTelemetry when you introduce background workers
    or retries.
- Keep Dockerfiles, build scripts, and Kubernetes manifests aligned—when you touch one, review the
    others.

## Roadmap Integration

Use the focus list below to link workstreams with the active roadmap. The script keeps this section
current when the roadmap evolves.
