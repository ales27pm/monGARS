# monGARS Delivery Charter

> ⚠️ Auto-generated by `scripts/manage_agents.py`. Update `configs/agents/agents_config.json` and rerun the script instead of editing this file manually.

## Scope

Applies to every repository change. Nested AGENTS.md files add stricter rules; this root charter
highlights the non-negotiable guardrails and shared context.

## Automation

- Generated via `python scripts/manage_agents.py refresh`. Edit the JSON profile instead of the
    Markdown when updating scope or requirements.
- Run `python scripts/manage_agents.py create <directory>` to scaffold a scoped AGENTS.md when a new
    subsystem lands.

## Roadmap Alignment

- **Security & Stability Hotlist**
  - ✅ Align JWT algorithm with deployed secrets (HS256 enforced until managed key storage is available).
  - ✅ Store runtime secrets in Vault/Sealed Secrets instead of raw `k8s/secrets.yaml`.
  - ✅ Update Dockerfiles to run as non-root and add a `.dockerignore` to exclude secrets and build artefacts.
  - ✅ Replace demo users in `web_api.py` with the database-backed authentication flow and migrations; bootstrap now persists accounts without shipping in-memory defaults.【F:monGARS/api/authentication.py†L17-L120】【F:monGARS/api/web_api.py†L41-L120】
- **Phase 3 – Hardware & Performance**
  - ✅ Worker auto-tuning for Pi/Jetson (`recommended_worker_count`).
  - ✅ Multi-architecture build scripts and cache metrics.
  - ✅ Hardened RBAC manifests.
  - ✅ Ray Serve HTTP integration with circuit breaking plus MNTP trainer support for LoRA and curated adapters.
  - ✅ Extend Alembic migrations for the newest SQLModel tables, including legacy tables created outside the current ORM layer.
  - ✅ Expose Ray Serve success/failure counters via OpenTelemetry (`llm.ray.*` metrics emitted by `LLMIntegration`).
- **Phase 5 – Web/API Refinement**
  - _(No matching roadmap entries for `Phase 5 – Web Interface & API Refinement (🔄 In Progress, Target Q1 2026)`)_

## Workflow Guardrails

- Target **Python 3.11** across tooling and CI.
- Format with `black` and `isort` using the repository `pyproject.toml` configuration.
- Run `pytest` before raising a pull request; record skipped suites and why.
- Document architecture, configuration, and operator workflows in `docs/` or the README when behaviour
    changes.
- ✅ Run `isort --check --diff .` and `black --check .` locally before committing to avoid CI
    formatting failures.
- 📌 Remember the 2025-10-16 CI failure where `isort` flagged `monGARS/core/inference_utils.py` and
    `monGARS/core/persistence.py`; always re-run the formatters after touching shared inference
    helpers to keep imports ordered and unblock the pipeline.

## Observability & Security

- Load configuration through `monGARS.config.get_settings()` so cached settings stay coherent across
    services.
- Redact secrets in logs and surface metrics via OpenTelemetry when you introduce background workers
    or retries.
- Keep Dockerfiles, build scripts, and Kubernetes manifests aligned—when you touch one, review the
    others.

## Roadmap Integration

Use the focus list below to link workstreams with the active roadmap. The script keeps this section
current when the roadmap evolves.
