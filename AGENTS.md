# monGARS Delivery Charter

> âš ï¸ Auto-generated by `scripts/manage_agents.py`. Update `configs/agents/agents_config.json` and rerun the script instead of editing this file manually.

## Scope

Applies to every repository change. Nested AGENTS.md files add stricter rules; this root charter
highlights the non-negotiable guardrails and shared context.

## Automation

- Generated via `python scripts/manage_agents.py refresh`. Edit the JSON profile instead of the
    Markdown when updating scope or requirements.
- Run `python scripts/manage_agents.py create <directory>` to scaffold a scoped AGENTS.md when a new
    subsystem lands.

## Roadmap Alignment

- **Security & Stability Hotlist**
  - âœ… Align JWT algorithm with deployed secrets (HS256 enforced until managed key storage is available).
  - âœ… Store runtime secrets in Vault/Sealed Secrets instead of raw `k8s/secrets.yaml`.
  - âœ… Update Dockerfiles to run as non-root and add a `.dockerignore` to exclude secrets and build artefacts.
  - âœ… Replace demo users in `web_api.py` with the database-backed authentication flow and migrations; bootstrap now persists accounts without shipping in-memory defaults.ã€F:monGARS/api/authentication.pyâ€ L17-L120ã€‘ã€F:monGARS/api/web_api.pyâ€ L41-L120ã€‘
- **Web/API Refinement**
  - âœ… FastAPI chat/history/token endpoints with validation.
  - âœ… Django chat UI with progressive enhancement.
  - âœ… FastAPI WebSocket handler with ticket verification, history replay, and streaming guarded by `WS_ENABLE_EVENTS`.
  - âœ… Replaced hard-coded credential stores with database-backed auth flows; FastAPI no longer seeds demo credentials at startup.ã€F:monGARS/api/web_api.pyâ€ L41-L120ã€‘
  - âœ… Publish polished SDKs and reference clients with documented release flows.ã€F:docs/sdk-release-guide.mdâ€ L1-L160ã€‘ã€F:docs/sdk-overview.mdâ€ L1-L120ã€‘
- **Self-Improvement & Research**
  - âœ… Personality profiles persisted via SQLModel with live adapter updates.
  - âœ… Self-training cycles produce real adapter artefacts via `modules.neurons.training.mntp_trainer.MNTPTrainer` with deterministic fallbacks.
  - âœ… Reinforcement-learning research loops run through the evolution orchestrator, operator approvals, and long-haul validator with telemetry and manifest updates.ã€F:modules/evolution_engine/orchestrator.pyâ€ L360-L440ã€‘ã€F:monGARS/core/long_haul_validation.pyâ€ L1-L220ã€‘
  - âœ… ResearchLongHaulService now schedules multi-replica soak runs and persists observability snapshots for dashboards, ensuring reinforcement pipelines stay healthy without manual triggers.ã€F:monGARS/core/research_validation.pyâ€ L1-L200ã€‘ã€F:monGARS/core/reinforcement_observability.pyâ€ L1-L168ã€‘ã€F:tests/test_research_long_haul_service.pyâ€ L1-L200ã€‘ã€F:tests/test_long_haul_validation.pyâ€ L200-L320ã€‘
- **Sustainability & Longevity**
  - ğŸš§ Fully integrate evolution engine outputs into routine optimisation cycles.
  - ğŸš§ Automate energy usage reporting and advanced hardware-aware scaling using the energy tracker pipeline and reinforcement observability feeds as the baseline data source.ã€F:modules/evolution_engine/energy.pyâ€ L1-L160ã€‘ã€F:monGARS/core/reinforcement_observability.pyâ€ L1-L168ã€‘
  - ğŸš§ Share optimisation artefacts between nodes for faster convergence.

## Workflow Guardrails

- Target **Python 3.11** for backend tooling and **Node.js 18+** for frontend builds.
- Format Python with `black` and `isort` (configured via `pyproject.toml`) and lint
    TypeScript/JavaScript assets with `npm run lint` before committing.
- Run `pytest` (631 tests, ~110s) and record skips; execute `npm run test` when web assets or SDKs
    change.
- Document architecture, configuration, and operator workflow changes in `docs/` or the README before
    shipping.
- Regenerate these instructions with `python scripts/manage_agents.py refresh` after editing
    `configs/agents/agents_config.json`.
- Partial or experimental code is acceptable only when it is intentionally fenced: hide incomplete
    flows behind feature flags or environment toggles, include TODOs that link to a tracking issue, and
    document downgrade/rollback steps in the PR summary. Avoid shipping unreachable stubs or dead code
    without a retirement plan.

## Observability & Security

- Load configuration through `monGARS.config.get_settings()` so cached settings stay coherent across
    services.
- Redact secrets in logs and wire new background tasks into `monGARS.telemetry` counters and
    OpenTelemetry toggles (`otel_prometheus_enabled`, `otel_traces_enabled`).
- Keep Dockerfiles, Compose stacks, and Kubernetes manifests aligned; review Vault/ExternalSecret
    usage whenever credentials change.

## Documentation & Runbooks

- Update runbooks, diagrams, and `monGARS_structure.txt` whenever module layout or workflows shift.
- Cross-link roadmap entries, docs, and code so operators can trace feature readiness and
    configuration changes.

## Roadmap Integration

Use the focus list below to link workstreams with the active roadmap. The script keeps this section
current when the roadmap evolves.
