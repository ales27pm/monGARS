# FastAPI Surface Standards

> ‚ö†Ô∏è Auto-generated by `scripts/manage_agents.py`. Update `configs/agents/agents_config.json` and rerun the script instead of editing this file manually.

## Scope

Applies to routers, schemas, WebSocket helpers, and auth utilities under `monGARS/api/`.

## Automation

- Refresh via the agents manager script to pick up roadmap changes or new endpoints.

## Roadmap Alignment

- **API Refinement**
  - _(No matching roadmap entries for `Phase 5 ‚Äì Web Interface & API Refinement (üîÑ In Progress, Target Q1 2026)`)_

## Endpoint Design

- Expose asynchronous routes returning typed Pydantic responses; centralise validation inside
    `schemas.py`.
- Register shared dependencies inside `dependencies.py` so tests can inject doubles.

## Security & Error Handling

- Flow authentication through `core.security.SecurityManager` and enforce bearer tokens on every route
    except `/ready` and `/healthz`.
- Translate domain errors into `HTTPException` codes; log unexpected failures with correlation IDs
    before bubbling up.

## Testing Hooks

Keep `tests/test_api_chat.py`, `tests/test_api_history.py`, and WebSocket suites aligned when
request/response contracts evolve.
