# Evolution Engine Playbook

> âš ï¸ Auto-generated by `scripts/manage_agents.py`. Update `configs/agents/agents_config.json` and rerun the script instead of editing this file manually.

## Scope

Defines how retraining orchestration and self-healing pipelines behave under
`modules/evolution_engine/`.

## Automation

- Auto-generated; update `configs/agents/agents_config.json` and rerun `python
    scripts/manage_agents.py refresh` instead of editing charters manually.
- CI reruns the refresh in the docs-metadata guardrail and publishes `docs_metadata.patch` when drift
    is detectedâ€”apply it locally with `git apply docs_metadata.patch`.

## Roadmap Alignment

- **Self-Training Execution**
  - âœ… Personality profiles persisted via SQLModel with live adapter updates.
  - âœ… Self-training cycles produce real adapter artefacts via `modules.neurons.training.mntp_trainer.MNTPTrainer` with deterministic fallbacks.
  - âœ… Reinforcement-learning research loops run through the evolution orchestrator, operator approvals, and long-haul validator with telemetry and manifest updates.ã€F:modules/evolution_engine/orchestrator.pyâ€ L360-L440ã€‘ã€F:monGARS/core/long_haul_validation.pyâ€ L1-L220ã€‘
  - âœ… ResearchLongHaulService now schedules multi-replica soak runs and persists observability snapshots for dashboards, ensuring reinforcement pipelines stay healthy without manual triggers.ã€F:monGARS/core/research_validation.pyâ€ L1-L200ã€‘ã€F:monGARS/core/reinforcement_observability.pyâ€ L1-L168ã€‘ã€F:tests/test_research_long_haul_service.pyâ€ L1-L200ã€‘ã€F:tests/test_long_haul_validation.pyâ€ L200-L320ã€‘
- **Sustainability Coordination**
  - ğŸš§ Fully integrate evolution engine outputs into routine optimisation cycles.
  - ğŸš§ Automate energy usage reporting and advanced hardware-aware scaling using the energy tracker pipeline and reinforcement observability feeds as the baseline data source.ã€F:modules/evolution_engine/energy.pyâ€ L1-L160ã€‘ã€F:monGARS/core/reinforcement_observability.pyâ€ L1-L168ã€‘
  - ğŸš§ Share optimisation artefacts between nodes for faster convergence.

## Pipeline Discipline

- Keep `EvolutionOrchestrator` focused on sequencing; instantiate trainers from
    `modules.neurons.training` and return artefact metadata for catalog updates.
- Represent pipeline stages with explicit methods for validation, training, deployment, rollback, and
    sustainability checks.
- Wrap external calls with targeted exception handlingâ€”log the action, include artefact identifiers,
    and propagate unexpected errors.

## Configuration

- Default to configs in `configs/training/` (`mntp_dolphin_config.json`, sustainability policies) with
    constructor overrides for deterministic tests.
- Document config changes in the README/docs and roadmap when defaults move or new sustainability
    gates are added.

## Validation

Extend `tests/test_evolution_engine.py`, `tests/test_sustainability_policy.py`, and long-haul
integration tests to cover success, failure, artefact validation, and sustainability gate scenarios.
Use fakes for `MNTPTrainer` in unit tests.
